# Dokumentasi Fitur & Sistem Bot Trading `bobot2.py`

## 1. Ringkasan Singkat
Bot adalah **MT5 automated trading bot** dengan GUI Tkinter, fitur safety & diagnostics lengkap, session-aware behaviour (Asia/London/New York + overlap), mode strategi (HFT, Scalping, Intraday, Arbitrage), auto-lot sizing, TP/SL multi-unit (pips / price / % / currency), dan logging/notifikasi.  

---

## 2. Koneksi & Diagnosa MT5
- Multi-attempt initialization + berbagai metode koneksi.
- Diagnostic prints: versi Python, platform, versi MT5, account & terminal info.
- Validasi koneksi sebelum setiap operasi trading.
- Troubleshooting hints (login, permission, terminal disconnected, firewall, Market Watch kosong).

---

## 3. Manajemen Symbol / Market Data
- Ambil symbols visible (`get_symbols`).
- Saran simbol populer (`get_symbol_suggestions`).
- Validasi & aktivasi symbol (`validate_and_activate_symbol`), dukungan XAU/GOLD.
- Final spread checks (threshold berbeda per tipe instrumen).

---

## 4. Kalkulasi Nilai
- `calculate_pip_value` — pip value per tipe symbol.
- `get_currency_conversion_rate` — direct, reverse, cross-rate via USD.

---

## 5. TP / SL Parsing & Validasi
- `parse_tp_sl_input` — multi-unit: pips, price, %, currency.
- `validate_tp_sl_levels` — cek min stop level, spread, arah order.

---

## 6. Auto-lot / Risk Sizing
- `calculate_auto_lot_size` — risk % → lot optimal.

---

## 7. Order Execution Engine
- `open_order`:
  - Rate limiting per symbol.
  - Cek max_positions.
  - Validasi & aktivasi symbol.
  - Ambil tick harga.
  - Session-based lot/TP/SL adjustment.
  - Hitung TP/SL via parser.
  - Validasi TP/SL.
  - Kirim order MT5 (`mt5.order_send`).

---

## 8. Strategi Trading
- Mode: HFT, Scalping, Intraday, Arbitrage.
- Default TP/SL per strategi bila input kosong.
- Jalur eksekusi: indikator → scoring → `execute_trade_signal` → `open_order`.

---

## 9. Session & Schedule Management
- Sesi: Asia, London, New York, Overlap.
- Tiap sesi punya parameter: max spread multiplier, volatility filter, trading intensity, preferred pairs.

---

## 10. Risk Management & Safeties
- `max_loss_streak`, `max_drawdown`, `profit_target`, `daily_max_loss`, `max_positions`.
- `validate_trading_conditions` sebelum order.
- Rate limiting & position limit enforcement.
- Auto close/emergency stop.

---

## 11. Monitoring, Logging & Reporting
- `logger` — ke console + GUI.
- `session_data` — metrik kinerja.
- Performance reports, export logs, integrasi Telegram.

---

## 12. GUI (Tkinter)
- Class `TradingBotGUI`:
  - Koneksi MT5, Start/Stop, emergency stop.
  - Symbol input & validate.
  - Kalkulator TP/SL interaktif.
  - Export logs.
  - Posisi list.
  - Risk percent entry.
  - Auto_lot toggle.
  - Strategy selector.

---

## 13. Auto-recovery & Maintenance
- `cleanup_resources` — garbage collection & clear dataframes.
- Loop health-check & reconnect.

---

## 14. Utilities
- `get_account_info`, `get_positions`, `get_symbols`, `get_symbol_suggestions`.
- CSV logging & export.

---

## 15. Sistem Kinerja
- Metrik: start_balance, total_trades, winning_trades, losing_trades, total_profit, daily_profit, max_equity.
- Monitor loss streak, drawdown, profit target.

---

## 16. Error Handling & Fallback
- `try/except` + logging detail.
- Mode read-only jika MT5 hilang koneksi.

---

## 17. Daftar Fungsi Kunci
- **Koneksi**: `connect_mt5`, `check_mt5_status`
- **Symbol**: `get_symbols`, `validate_and_activate_symbol`, `detect_gold_symbol`, `get_symbol_suggestions`
- **Pricing**: `calculate_pip_value`, `get_currency_conversion_rate`
- **TP/SL**: `parse_tp_sl_input`, `validate_tp_sl_levels`
- **Lot/Risk**: `calculate_auto_lot_size`
- **Trade Execution**: `open_order`, `execute_trade_signal`
- **Utilities**: `cleanup_resources`, `ensure_log_directory`, `logger`
- **GUI**: `TradingBotGUI`

---
